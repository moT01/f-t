version: '0.1.0'
config:
  testRunner:
    command: ./node_modules/.bin/mocha
    args:
      tap: --reporter=mocha-tap-reporter
    setup:
      commands:
        # run npm install in coderoad folder on load to install testing dependecies
        - npm install
        # run the commands below to change persissions to required files in Strove as well as change log configurations
        - cd /etc/postgresql/12/main && sudo chmod 666 postgresql.conf && echo "log_statement = 'all'" >> postgresql.conf && echo "log_min_error_statement = INFO" >> postgresql.conf && echo "log_min_messages = INFO" >> postgresql.conf && cd /var/log/postgresql && sudo chmod 666 postgresql-12-main.log
        # start psql, connect to psql, change the admin password, and shutdown psql
        - sudo service postgresql start && sudo -u postgres psql && ALTER ROLE postgres WITH PASSWORD 'password'; && exit && sudo service postgres stop
    directory: coderoad
  repo: 
    uri: https://github.com/moT01/f-t
    branch: v0.1.0
  dependencies:
    - name: node
      version: '>=10'
levels:
  - id: L1
    steps:
      - id: L1S1
        setup:
          subtasks: false
  - id: L2
    steps:
      - id: L2S1
        setup:
          files: 
            - index.html
  - id: L3
    steps:
      - id: L3S1
        setup:
          watchers:
            - ../../../../var/log/postgresql/postgresql-12-main.log